# Unifying87键盘

## 1、序

这是一篇以Unifying87为例的优联机械键盘的构建记录，本文虽然不是一篇教程，但是也会尽量详细的对整个项目进行阐述，以帮助希望自己构建优联键盘的朋友，在开始之前我会将物料清单以及一些注意事项列出，以供判断此项目是否符合自己的能力和预算。

预算方面先说结论：这是一个￥400内的键盘案例（不包含键帽、轴体与工具）

![](https://i.imgur.com/0JSJ8QS.jpg)

### 1.1、配件与工具列表

| 矩阵配件列表           | 数量 | 备注             | 总价  |
| ---------------------- | ---- | ---------------- | :---- |
| K375s主控              | 1    |                  | ￥139 |
| 27pinFPC排线+座子      | 1    |                  | ￥1.8 |
| K375sMatrixPCB         | 1    | 需要自行绘制电路 | ￥30  |
| 凯华Kailh热插拔轴座    | 87   |                  | ￥43  |
| 87外壳+定位板+键线分离 | 1    |                  | ￥64  |



| 锂电配件列表        | 数量 | 备注           | 总价  |
| ------------------- | ---- | -------------- | ----- |
| 锂电池              | 1    | 建议尺寸343450 | ￥10  |
| 锂电充电模块        | 1    | 建议买两个     | ￥1.9 |
| 3.0v锂电池降压模块* | 1    | 建议买两个     | ￥4.4 |

[^]: *购买此模块的时候需要注意输入电压范围，锂电池是4.2v~3.7v



| 耗材列表      | 单位 | 备注                                  |
| ------------- | ---- | ------------------------------------- |
| 杜邦205润滑脂 | 10g  |                                       |
| M2铜柱与螺丝  | 2组  | M2*4+3的铜柱与对应的M2平头螺丝（4mm） |
| 焊锡丝        | 1卷  | 新手建议使用友邦6337                  |
| 银线          | 1m   | 用于连接锂电模块                      |
| 助焊剂        | 少许 | 建议使用免洗助焊剂                    |
| 洗板水        | 少许 | 在通风良好的环境使用                  |



| 工具列表 | 注意事项与备注                                     | 预算参考 |
| -------- | -------------------------------------------------- | -------- |
| 万用表   | 没有万用表寸步难行，是必须购买的工具之一           | ￥50     |
| 电烙铁   | 建议T12起步，尽量避免使用几十块钱的设备            | ￥180    |
| 吸锡工具 | 吸锡器、吸锡带                                     | ￥30     |
| 电磨     | 电磨的作用是切掉定位板（钢材）的固定梢，用锯子也行 |          |
| 镊子     |                                                    |          |



### 1.2、注意事项

**注意：以上价格都没有计算运费，有几点需要特别留意的**

1、K375s的主控市面上有假货，不要为了省钱去闲鱼买￥80多的主控，直接去JD购买K375s回来自己拆解会减少很多很多的麻烦。

2、上面已经强调过的，锂电池方案涉及到降压电路，降压模块的**输入电压**一定要是能兼容**3.7v输入3.0v输出**的，不要买一个10v输入3v输出的模块，电池接上去一点反应都没有。

3、绘制电路板需要一定的时间学习，本文不会对此内容进行展开，但是我会将我PCB的Gerber文件开源，可以免费使用。

4、焊接工作虽然不是很难但是具备一定危险性，使用电烙铁时请注意安全。



## 2、Unifying87简介

Unifying87这个键盘是给[@城管](https://space.bilibili.com/7333114/?spm_id_from=333.999.0.0)设计的，换过了几次方案和设计，最早其实想采用32u4的蓝牙方案做一些模块化，但是后来考虑到32u4无线连接的体验不够无感以及功耗比较高，需要更加频繁的充电，加上当时城管提到的主要的需求是：“便宜耐用的无线87布局”。所以最终的方案就定为优联了。优联即插即用，瞬间唤醒的体验还是很好的。而且一个接收器可以配对六个优联设备，非常爽（所以我也搞了一把自己用，但是Z键帽装反了，拍照的时候没发现）

![](https://i.imgur.com/f75S1wG.jpg)

## 3、选材与制作

### 3.1、外壳选择

外壳这次没有建模，使用了公模的87外壳，￥64一整套，含定位板，钢板卫星轴，键线分离模块，好处就是非常便宜，问题是设计PCB变成了一个逆向工程，需要配合外壳来做pcb的设计。

![waike](https://i.imgur.com/sd7XBcz.png)

### 3.2、主控选择与矩阵（Matrix）设计

主控用的是资料很多的K375s，从旗舰店直接买键盘回来拆，会带优联接收器。

![K375s](https://i.imgur.com/tbDBJ25.png)

对于机械键盘来讲，电路主要分为两个部分：

**1、主控部分（负责识别矩阵信号并且将键值发送给计算机）**

**2、矩阵部分（矩阵是按照行和列排列好的按键，作用是减少主控io的占用，例：(4,23)的键值是B）**

对于K375s，主控部分已经由罗技设计好了，通过一个27pin的接口与柔性矩阵连接，我要做的工作就是将原厂的柔性矩阵去掉，换排线连接兼容MX轴体的PCB，所以第一步就是搞清楚罗技的矩阵设计方案：

![](https://i.imgur.com/EMbdMWT.png)

行和列的数字对应主控的引脚，罗技整个矩阵非常的凌乱，我也不知道为什么要这么设计，猜想可能是通过这样穿插的排布来实现无二极管的防冲。

理解之后就可以矩阵规划图绘制原理图和PCB，这部分我就不展开讲了，快速掠过，反正Gerber文件开源了，需要的直接下载就行，按照K375s的矩阵绘制好的原理图会长这样：

![sch](https://i.imgur.com/k8Vt36F.png)

测量外壳数据逆向绘制PCB，并根据原理图提示连线，完了之后长这样

![PCB](https://i.imgur.com/zLh7J0M.png)

可以使用Kiacad 的3D预览

![3D](https://i.imgur.com/pvIGPdz.png)

确认没问题之后就可以交给厂家打板

### 3.3、锂电方案设计

K375s的主控采用的是3v的干电池供电，因为外壳改造成电池仓太困难了，干电池也不够战未来，所以换成锂电池供电，Type-C充电的方案。锂电池的工作电压是3.7v-4.2v，所以要做降压之后才能给主控供电，这里就需要降压模块，3.7v进3.0v出的就可以。另外，锂电池充电还需要一个充电模块，采用的是TP4056的方案，连接方式如图。（U2是键线分离模块）

![Li](https://i.imgur.com/LuuMA7N.png)





### 3.4、装配与测试

